{{!-- 
Nexus Enhanced Code Block Component
Usage: {{> "nexus/code-block" language="javascript" title="Example API Call"}}
--}}

<div class="nexus-code-block">
    {{#if title}}
    <div class="nexus-code-header">
        <span class="nexus-code-lang">{{language}}</span>
        <span class="nexus-code-title">{{title}}</span>
        <button class="nexus-code-copy" onclick="copyCode(this)" data-copy="Copy" data-copied="Copied!">
            Copy
        </button>
    </div>
    {{/if}}
    
    <div class="nexus-code-content">
        <pre><code class="language-{{language}}">{{> @partial-block}}</code></pre>
    </div>
</div>

<script>
function copyCode(button) {
    const codeBlock = button.closest('.nexus-code-block');
    const code = codeBlock.querySelector('code').textContent;
    
    navigator.clipboard.writeText(code).then(() => {
        const originalText = button.textContent;
        button.textContent = button.dataset.copied;
        button.style.background = 'var(--nexus-success)';
        
        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = '';
        }, 2000);
    });
}
</script>
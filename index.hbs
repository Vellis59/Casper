{{!< default}}
{{!-- Revolutionary Nexus Homepage Layout --}}

{{!-- Sidebar Navigation --}}
<aside class="nexus-sidebar nexus-glass-dark nexus-scanlines">
    {{!-- Animated Brand --}}
    <div class="nexus-brand">
        <a href="{{@site.url}}" class="nexus-brand-logo nexus-neon-primary">
            {{@site.title}}
        </a>
        <div class="nexus-brand-tagline nexus-typewriter">
            > Connecting minds through code
        </div>
    </div>

    {{!-- Dashboard Navigation --}}
    <nav class="nexus-nav">
        <ul class="nexus-nav-list">
            <li class="nexus-nav-item">
                <a href="{{@site.url}}" class="nexus-nav-link nexus-3d-hover">
                    <span class="nexus-nav-icon">üè†</span>
                    <span>Home</span>
                </a>
            </li>
            {{#foreach navigation}}
            <li class="nexus-nav-item">
                <a href="{{url}}" class="nexus-nav-link nexus-3d-hover">
                    <span class="nexus-nav-icon">‚ö°</span>
                    <span>{{label}}</span>
                </a>
            </li>
            {{/foreach}}
            <li class="nexus-nav-item">
                <a href="#" class="nexus-nav-link nexus-3d-hover" data-ghost-search>
                    <span class="nexus-nav-icon">üîç</span>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>

    {{!-- Tech Widgets --}}
    <div class="nexus-widgets">
        {{!-- System Status Widget --}}
        <div class="nexus-widget nexus-glass nexus-pulse">
            <div class="nexus-widget-title">System Status</div>
            <div class="nexus-widget-content">
                <div>üü¢ All systems operational</div>
                <div>üìä Performance: Optimal</div>
                <div>üîÑ Last sync: Just now</div>
            </div>
        </div>

        {{!-- Quick Stats Widget --}}
        <div class="nexus-widget nexus-glass">
            <div class="nexus-widget-title">Quick Stats</div>
            <div class="nexus-widget-content">
                <div>üìù Posts: {{pagination.total}}</div>
                <div>üè∑Ô∏è Tags: Active</div>
                <div>üë®‚Äçüíª Authors: Contributing</div>
            </div>
        </div>

        {{!-- Social Links Widget --}}
        {{#if @custom.github_username}}
        <div class="nexus-widget nexus-glass nexus-hologram">
            <div class="nexus-widget-title">Connect</div>
            <div class="nexus-widget-content">
                {{#if @custom.github_username}}
                <a href="https://github.com/{{@custom.github_username}}" class="nexus-social-link" target="_blank">
                    üì¶ GitHub
                </a>
                {{/if}}
                {{#if @custom.twitter_username}}
                <a href="https://twitter.com/{{@custom.twitter_username}}" class="nexus-social-link" target="_blank">
                    üê¶ Twitter
                </a>
                {{/if}}
            </div>
        </div>
        {{/if}}

        {{!-- Matrix Rain Effect --}}
        <div class="nexus-matrix-rain">
            <div class="nexus-matrix-column" style="left: 10%; animation-delay: 0s;">10110</div>
            <div class="nexus-matrix-column" style="left: 30%; animation-delay: 1s;">01101</div>
            <div class="nexus-matrix-column" style="left: 50%; animation-delay: 2s;">11010</div>
            <div class="nexus-matrix-column" style="left: 70%; animation-delay: 0.5s;">00111</div>
            <div class="nexus-matrix-column" style="left: 90%; animation-delay: 1.5s;">10101</div>
        </div>
    </div>
</aside>

{{!-- Mobile Sidebar Toggle --}}
<button class="nexus-mobile-toggle" onclick="toggleSidebar()">
    ‚ò∞
</button>

{{!-- Main Content Area --}}
<main class="site-content nexus-hex-pattern">
    {{!-- Loading Progress Bar --}}
    <div class="nexus-loading">
        <div class="nexus-loading-bar"></div>
    </div>

    {{!-- Revolutionary Hero Section --}}
    <section class="nexus-hero nexus-glass-dark nexus-hologram nexus-float">
        <div class="nexus-hero-content">
            <h1 class="nexus-hero-title nexus-glitch-text" data-text="Welcome to the Future">
                Welcome to the Future
            </h1>
            <p class="nexus-hero-subtitle">
                Where code meets creativity, and innovation shapes tomorrow. 
                Explore cutting-edge tutorials, tech insights, and developer stories.
            </p>
            <a href="#posts" class="nexus-hero-cta nexus-neon-box nexus-data-stream">
                <span>Explore Tech Universe</span>
                <span style="margin-left: 10px;">üöÄ</span>
            </a>
        </div>
        
        {{!-- Floating Energy Orbs --}}
        <div class="nexus-energy-orb" style="position: absolute; top: 20%; right: 20%;"></div>
        <div class="nexus-energy-orb" style="position: absolute; bottom: 30%; left: 15%; animation-delay: 0.5s;"></div>
        
        {{!-- Particle System - Generated by JavaScript --}}
        <div class="nexus-particles" id="hero-particles"></div>
    </section>

    {{!-- Interactive Terminal Section --}}
    <section class="nexus-terminal-section" style="margin: 4rem 0;">
        {{#> "nexus/terminal" title="nexus@localhost:~$"}}
        <div class="nexus-terminal-prompt">$</div> 
        <div class="nexus-terminal-command nexus-typewriter">cat latest_posts.json</div>
        <div class="nexus-terminal-output">
        {
          "status": "success",
          "posts_count": {{pagination.total}},
          "latest_update": "{{date format='YYYY-MM-DD HH:mm'}}",
          "featured_topics": ["AI", "WebDev", "DevOps", "Blockchain"]
        }
        </div>
        <div class="nexus-terminal-prompt">$</div> 
        <div class="nexus-terminal-command">npm run explore</div>
        <div class="nexus-terminal-output nexus-neon-primary">üöÄ Initializing content discovery...</div>
        {{/"nexus/terminal"}}
    </section>

    {{!-- Revolutionary Post Grid --}}
    <section id="posts" class="nexus-post-section">
        <h2 class="section-title nexus-neon-accent" style="text-align: center; margin-bottom: 3rem; font-size: 2.5rem;">
            Latest Tech Chronicles
        </h2>
        
        <div class="nexus-post-grid">
            {{#foreach posts}}
            <article class="nexus-card nexus-glass {{#if featured}}featured{{/if}} nexus-3d-hover nexus-morph loading" 
                     style="animation-delay: {{@index}}00ms;" data-post-index="{{@index}}">
                
                {{!-- Card Header with Image --}}
                <div class="nexus-card-header">
                    {{#if feature_image}}
                    <img src="{{img_url feature_image size="m"}}" 
                         alt="{{title}}" 
                         class="nexus-card-image">
                    {{else}}
                    <div class="nexus-card-image nexus-circuit" style="background: linear-gradient(135deg, var(--nexus-bg-tertiary), var(--nexus-bg-code));"></div>
                    {{/if}}
                    
                    {{!-- Holographic Overlay --}}
                    <div class="nexus-card-overlay"></div>
                    
                    {{!-- Tech Tags --}}
                    {{#if tags}}
                    <div class="nexus-card-tags">
                        {{#foreach tags limit="3"}}
                        <span class="nexus-tag nexus-float">{{name}}</span>
                        {{/foreach}}
                    </div>
                    {{/if}}
                    
                    {{!-- Reading Time HUD --}}
                    {{#if reading_time}}
                    <div class="nexus-reading-time nexus-pulse">
                        ‚è±Ô∏è {{reading_time}}
                    </div>
                    {{/if}}
                    
                    {{!-- Progress Bar --}}
                    <div class="nexus-card-progress"></div>
                </div>

                {{!-- Card Content --}}
                <div class="nexus-card-content">
                    <h3 class="nexus-card-title">
                        <a href="{{url}}">{{title}}</a>
                    </h3>
                    
                    {{#if custom_excerpt}}
                    <p class="nexus-card-excerpt">{{custom_excerpt}}</p>
                    {{else}}
                    <p class="nexus-card-excerpt">{{excerpt words="25"}}</p>
                    {{/if}}

                    {{!-- Tech Badges --}}
                    {{#if @custom.enable_tech_badges}}
                    <div class="nexus-card-actions">
                        <button class="nexus-action-btn nexus-data-stream" onclick="likePost('{{id}}')">
                            üëç Like
                        </button>
                        <button class="nexus-action-btn" onclick="sharePost('{{url}}')">
                            üîó Share
                        </button>
                        <button class="nexus-action-btn nexus-hologram" onclick="bookmarkPost('{{id}}')">
                            üîñ Save
                        </button>
                    </div>
                    {{/if}}
                </div>

                {{!-- Author HUD --}}
                <div class="nexus-card-author nexus-glass">
                    {{#primary_author}}
                    {{#if profile_image}}
                    <img src="{{img_url profile_image size="xs"}}" 
                         alt="{{name}}" 
                         class="nexus-author-avatar">
                    {{else}}
                    <div class="nexus-author-avatar" style="background: var(--nexus-primary); display: flex; align-items: center; justify-content: center; color: var(--nexus-bg-primary); font-weight: bold;">
                        ?
                    </div>
                    {{/if}}
                    <div class="nexus-author-info">
                        <div class="nexus-author-name">{{name}}</div>
                        <div class="nexus-author-meta">{{published_at timeago}}</div>
                    </div>
                    {{/primary_author}}
                    
                    {{!-- Particle Burst Effect - Generated by JavaScript --}}
                    <div class="nexus-card-particles" data-card-particles></div>
                </div>
            </article>
            {{/foreach}}
        </div>
    </section>

    {{!-- Futuristic Pagination --}}
    {{pagination}}
</main>

{{!-- Global Particle System - Generated by JavaScript --}}
<div class="nexus-matrix-bg" id="matrix-background"></div>

{{!-- Custom JavaScript for Revolutionary Features --}}
<script>
// Sidebar Toggle for Mobile
function toggleSidebar() {
    document.querySelector('.nexus-sidebar').classList.toggle('open');
}

// Generate Particles for Hero Section
function generateHeroParticles() {
    const container = document.getElementById('hero-particles');
    if (!container) return;
    
    for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'nexus-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
        container.appendChild(particle);
    }
}

// Generate Card Particles
function generateCardParticles() {
    const containers = document.querySelectorAll('[data-card-particles]');
    containers.forEach(container => {
        for (let i = 0; i < 10; i++) {
            const particle = document.createElement('div');
            particle.className = 'nexus-card-particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 1000 + 'ms';
            container.appendChild(particle);
        }
    });
}

// Generate Matrix Background
function generateMatrixBackground() {
    const container = document.getElementById('matrix-background');
    if (!container) return;
    
    const chars = '01ABCDEF';
    for (let i = 0; i < 50; i++) {
        const char = document.createElement('div');
        char.className = 'nexus-matrix-char';
        char.textContent = chars.charAt(Math.floor(Math.random() * chars.length));
        char.style.left = Math.random() * 100 + '%';
        char.style.animationDelay = Math.random() * 8 + 's';
        char.style.animationDuration = (Math.random() * 6 + 6) + 's';
        container.appendChild(char);
    }
}

// Interactive Loading Progress
window.addEventListener('load', function() {
    const loadingBar = document.querySelector('.nexus-loading-bar');
    if (loadingBar) {
        loadingBar.style.width = '100%';
        setTimeout(() => {
            document.querySelector('.nexus-loading').style.display = 'none';
        }, 500);
    }
});

// Card Loading Animation
document.addEventListener('DOMContentLoaded', function() {
    // Generate all particles
    generateHeroParticles();
    generateCardParticles();
    generateMatrixBackground();
    
    // Animate loading cards
    const cards = document.querySelectorAll('.nexus-card.loading');
    cards.forEach((card, index) => {
        setTimeout(() => {
            card.classList.remove('loading');
        }, index * 100);
    });
});

// Interactive Actions
function likePost(postId) {
    console.log('Liked post:', postId);
    showNotification('Post liked! üíô', 'success');
}

function sharePost(url) {
    if (navigator.share) {
        navigator.share({ url: url });
    } else {
        navigator.clipboard.writeText(url);
        showNotification('URL copied to clipboard! üîó', 'info');
    }
}

function bookmarkPost(postId) {
    console.log('Bookmarked post:', postId);
    showNotification('Post saved! üîñ', 'success');
}

// Show Notification
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `nexus-notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--nexus-primary);
        color: var(--nexus-bg-primary);
        padding: 12px 20px;
        border-radius: 8px;
        font-family: var(--nexus-font-code);
        font-size: 14px;
        z-index: 10000;
        animation: slideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Mouse Reactive Background
document.addEventListener('mousemove', function(e) {
    const reactive = document.querySelectorAll('.nexus-reactive-bg');
    reactive.forEach(el => {
        const rect = el.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width) * 100;
        const y = ((e.clientY - rect.top) / rect.height) * 100;
        el.style.setProperty('--mouse-x', x + '%');
        el.style.setProperty('--mouse-y', y + '%');
    });
});

// Matrix Effect Enhancement
function createMatrixRain() {
    const container = document.getElementById('matrix-background');
    if (!container) return;
    
    setInterval(() => {
        const char = document.createElement('div');
        char.className = 'nexus-matrix-char';
        char.textContent = Math.random() > 0.5 ? '1' : '0';
        char.style.left = Math.random() * 100 + '%';
        char.style.animationDuration = (Math.random() * 6 + 4) + 's';
        container.appendChild(char);
        
        setTimeout(() => {
            if (char.parentNode) char.remove();
        }, 8000);
    }, 200);
}

// Initialize Matrix Rain
setTimeout(createMatrixRain, 1000);

// Glitch Effect for Hero Text
setInterval(() => {
    const glitchText = document.querySelector('.nexus-glitch-text');
    if (glitchText && Math.random() > 0.95) {
        glitchText.style.animation = 'none';
        setTimeout(() => {
            glitchText.style.animation = 'nexus-glitch 0.3s ease-in-out';
        }, 10);
    }
}, 100);
</script>

<style>
{{!-- Custom animations for this page --}}
@keyframes random-float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-5px) rotate(2deg); }
    50% { transform: translateY(-10px) rotate(-1deg); }
    75% { transform: translateY(-5px) rotate(1deg); }
}

.nexus-card:nth-child(odd) {
    animation-delay: 0.2s;
}

.nexus-card:nth-child(even) {
    animation-delay: 0.4s;
}

.section-title {
    position: relative;
    display: inline-block;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, var(--nexus-primary), var(--nexus-accent));
    animation: nexus-pulse-line 2s ease-in-out infinite;
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}
</style>
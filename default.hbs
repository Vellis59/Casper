<!DOCTYPE html>
<html lang="{{@site.locale}}"{{#match @custom.color_scheme "Dark"}} class="dark-mode"{{else match @custom.color_scheme "Auto"}} class="auto-color"{{/match}}>
<head>

    {{!-- Basic meta - advanced meta is output with {ghost_head} below --}}
    <title>{{meta_title}}</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    {{!-- Google Fonts for Nexus theme --}}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    {{!-- Preload scripts --}}
    <link rel="preload" as="style" href="{{asset "built/screen.css"}}" />
    <link rel="preload" as="script" href="{{asset "built/casper.js"}}" />

    {{!-- Theme assets - use the {asset} helper to reference styles & scripts,
    this will take care of caching and cache-busting automatically --}}
    <link rel="stylesheet" type="text/css" href="{{asset "built/screen.css"}}" />

    {{!-- This tag outputs all your advanced SEO meta, structured data, and other important settings,
    it should always be the last tag before the closing head tag --}}
    {{ghost_head}}

</head>
<body class="{{body_class}} nexus-theme is-head-{{#match @custom.navigation_layout "Logo on cover"}}left-logo{{else match @custom.navigation_layout "Logo in the middle"}}middle-logo{{else}}stacked{{/match}}{{#match @custom.title_font "=" "Elegant serif"}} has-serif-title{{/match}}{{#match @custom.body_font "=" "Modern sans-serif"}} has-sans-body{{/match}}{{#if @custom.show_publication_cover}} has-cover{{/if}}{{#match @custom.color_scheme "Dark"}} dark-mode{{else match @custom.color_scheme "Light"}} light-mode{{else}} auto-color{{/match}}">
<div class="viewport">

    <header id="gh-head" class="gh-head outer{{#match @custom.header_style "Hidden"}} is-header-hidden{{/match}}">
        <div class="gh-head-inner inner">
            <div class="gh-head-brand">
                <a class="gh-head-logo{{#unless @site.logo}} no-image{{/unless}}" href="{{@site.url}}">
                    {{#if @site.logo}}
                        <img src="{{@site.logo}}" alt="{{@site.title}}">
                    {{else}}
                        {{@site.title}}
                    {{/if}}
                </a>
                <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{> "icons/search"}}</button>
                <button class="gh-burger" aria-label="Main Menu"></button>
            </div>

            <nav class="gh-head-menu">
                {{navigation}}
                {{#unless @site.members_enabled}}
                    {{#match @custom.navigation_layout "Stacked"}}
                        <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{> "icons/search"}}</button>
                    {{/match}}
                {{/unless}}
            </nav>

            <div class="gh-head-actions">
                {{#unless @site.members_enabled}}
                    {{^match @custom.navigation_layout "Stacked"}}
                        <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{> "icons/search"}}</button>
                    {{/match}}
                {{else}}
                    <button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search>{{> "icons/search"}}</button>
                    <div class="gh-head-members">
                        {{#unless @member}}
                            {{#unless @site.members_invite_only}}
                                <a class="gh-head-link" href="#/portal/signin" data-portal="signin">Sign in</a>
                                <a class="gh-head-button" href="#/portal/signup" data-portal="signup">Subscribe</a>
                            {{else}}
                                <a class="gh-head-button" href="#/portal/signin" data-portal="signin">Sign in</a>
                            {{/unless}}
                        {{else}}
                            <a class="gh-head-button" href="#/portal/account" data-portal="account">Account</a>
                        {{/unless}}
                    </div>
                {{/unless}}
            </div>
        </div>
    </header>

    <div class="site-content">
        {{!-- All other templates get inserted here, index.hbs, post.hbs, etc --}}
        {{{body}}}
    </div>

    {{!-- The global footer at the very bottom of the screen --}}
    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="{{@site.url}}">{{@site.title}}</a> &copy; {{date format="YYYY"}}</section>
            <nav class="site-footer-nav">
                {{navigation type="secondary"}}
                {{!-- Social links from custom settings --}}
                <div class="nexus-social-links">
                    {{#if @custom.github_username}}
                    <a href="https://github.com/{{@custom.github_username}}" target="_blank" rel="noopener" class="nexus-social-link">
                        GitHub
                    </a>
                    {{/if}}
                    {{#if @custom.twitter_username}}
                    <a href="https://twitter.com/{{@custom.twitter_username}}" target="_blank" rel="noopener" class="nexus-social-link">
                        Twitter
                    </a>
                    {{/if}}
                    {{#if @custom.linkedin_username}}
                    <a href="https://linkedin.com/in/{{@custom.linkedin_username}}" target="_blank" rel="noopener" class="nexus-social-link">
                        LinkedIn
                    </a>
                    {{/if}}
                </div>
            </nav>
            <div class="gh-powered-by"><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div>
        </div>
    </footer>

</div>
{{!-- /.viewport --}}

{{#is "post, page"}}
    {{> "lightbox"}}
{{/is}}

{{!-- Nexus reading progress bar --}}
{{#if @custom.show_reading_progress}}
<div class="nexus-progress" style="position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;">
    <div class="nexus-progress-bar"></div>
</div>
{{/if}}

{{!-- Mode Toggle Controls --}}
<div class="nexus-mode-toggle">
    <button class="nexus-mode-btn" onclick="toggleMode('default')" title="Default Mode">üè†</button>
    <button class="nexus-mode-btn" onclick="toggleMode('neon')" title="Neon Mode">üíú</button>
    <button class="nexus-mode-btn" onclick="toggleMode('matrix')" title="Matrix Mode">üü¢</button>
    <button class="nexus-mode-btn" onclick="toggleMode('gaming')" title="Gaming RGB Mode">üéÆ</button>
    <button class="nexus-mode-btn" onclick="toggleMode('retro')" title="Retro 80s Mode">üìº</button>
    <button class="nexus-mode-btn" onclick="toggleMode('minimal')" title="Minimal Mode">‚ö™</button>
</div>

{{!-- Scripts - handle member signups, responsive videos, infinite scroll, floating headers, and galleries --}}
<script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="{{asset "built/casper.js"}}"></script>

{{!-- Nexus enhanced functionality --}}
<script src="{{asset "js/nexus-tech.js"}}"></script>
<script src="{{asset "js/nexus-helpers.js"}}"></script>

{{!-- Mode Toggle Script --}}
<script>
function toggleMode(mode) {
    // Remove all mode classes
    const modeClasses = ['nexus-neon-mode', 'nexus-matrix-mode', 'nexus-gaming-mode', 'nexus-retro-mode', 'nexus-minimal-mode'];
    modeClasses.forEach(cls => document.body.classList.remove(cls));
    
    // Remove active class from all buttons
    document.querySelectorAll('.nexus-mode-btn').forEach(btn => btn.classList.remove('active'));
    
    // Add selected mode
    if (mode !== 'default') {
        document.body.classList.add('nexus-' + mode + '-mode');
    }
    
    // Add active class to clicked button
    event.target.classList.add('active');
    
    // Save preference
    localStorage.setItem('nexus-mode', mode);
    
    // Show notification
    showModeNotification(mode);
}

function showModeNotification(mode) {
    const notifications = {
        'default': 'üè† Default Mode Activated',
        'neon': 'üíú Neon Cyberpunk Mode Activated',
        'matrix': 'üü¢ Matrix Digital Rain Mode Activated', 
        'gaming': 'üéÆ Gaming RGB Mode Activated',
        'retro': 'üìº Retro 80s Synthwave Mode Activated',
        'minimal': '‚ö™ Minimal Clean Mode Activated'
    };
    
    const notification = document.createElement('div');
    notification.className = 'nexus-notification';
    notification.textContent = notifications[mode] || 'Mode Changed';
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--nexus-primary);
        color: var(--nexus-bg-primary);
        padding: 12px 20px;
        border-radius: 8px;
        font-family: var(--nexus-font-code);
        font-size: 14px;
        z-index: 10000;
        animation: slideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => notification.remove(), 300);
    }, 2000);
}

// Load saved mode on page load
document.addEventListener('DOMContentLoaded', function() {
    const savedMode = localStorage.getItem('nexus-mode') || 'default';
    if (savedMode !== 'default') {
        document.body.classList.add('nexus-' + savedMode + '-mode');
        const btn = document.querySelector(`[onclick="toggleMode('${savedMode}')"]`);
        if (btn) btn.classList.add('active');
    } else {
        const defaultBtn = document.querySelector(`[onclick="toggleMode('default')"]`);
        if (defaultBtn) defaultBtn.classList.add('active');
    }
});

// CSS for notifications
const style = document.createElement('style');
style.textContent = `
@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}
`;
document.head.appendChild(style);
</script>

{{!-- Prism.js for syntax highlighting --}}
{{#match @custom.syntax_theme "GitHub Dark"}}
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-github-dark.min.css" rel="stylesheet">
{{else match @custom.syntax_theme "VS Code Dark"}}
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-vsc-dark-plus.min.css" rel="stylesheet">
{{else}}
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
{{/match}}

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

{{#if @custom.show_code_line_numbers}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">
{{/if}}

{{!-- Custom CSS for code font and theme settings --}}
<style>
{{#match @custom.code_font "JetBrains Mono"}}
:root { --nexus-font-code: 'JetBrains Mono', 'Fira Code', monospace; }
{{else match @custom.code_font "SF Mono"}}
:root { --nexus-font-code: 'SF Mono', 'JetBrains Mono', monospace; }
{{else}}
:root { --nexus-font-code: 'Fira Code', 'JetBrains Mono', monospace; }
{{/match}}

{{#unless @custom.enable_code_copy}}
.nexus-code-copy { display: none !important; }
{{/unless}}

{{#unless @custom.enable_tech_badges}}
.nexus-badge { display: none !important; }
{{/unless}}
</style>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>

{{!-- Ghost outputs required functional scripts with this tag - it should always be the last thing before the closing body tag --}}
{{ghost_foot}}

</body>
</html>
